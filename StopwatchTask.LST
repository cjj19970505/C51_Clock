C51 COMPILER V9.59.0.0   STOPWATCHTASK                                                     01/10/2019 23:20:40 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE STOPWATCHTASK
OBJECT MODULE PLACED IN StopwatchTask.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE StopwatchTask.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "Looper\\Looper.h"
   2          #include "Time.h"
   3          #include "Input.h"
   4          #include "SegScreen\\SegScreen.h"
   5          #include "TaskUtility.h"
   6          #include "TaskSelector.h"
   7          
   8          #define IN_FOREGROUND (TASKSELECTOR_CURRENT_MODE == TASKSELECTOR_MODE_STOPWATCH)
   9          
  10          #define SEG_VIEW_ARRAY TaskUtility_Public_Var_SegViewArr
  11          
  12          #define MODE_STOP 0
  13          #define MODE_RUNNING 1
  14          
  15          #define KEYCODE_RUN_OR_STOP INPUT_TOKEYCODE(1,2)
  16          #define KEYCODE_INIT INPUT_TOKEYCODE(1,3)
  17          
  18          TIME stopwatchTask_Time;
  19          char stopwatchTask_Mode = MODE_STOP;
  20          void StopwatchTask_Init()
  21          {
  22   1        TIME_SET_HOUR(stopwatchTask_Time, 0);
  23   1        TIME_SET_MINUTE(stopwatchTask_Time, 0);
  24   1        TIME_SET_SECOND(stopwatchTask_Time, 0);
  25   1      }
  26          void StopwatchTask_LooperUpdate(LOOPER *looper)
  27          {
  28   1        if(IN_FOREGROUND)
  29   1        {
  30   2          Time_ToString(&stopwatchTask_Time, '.', 1,SEG_VIEW_ARRAY);
  31   2        }
  32   1        if(stopwatchTask_Mode == MODE_STOP && IN_FOREGROUND)
  33   1        {
  34   2          if(Input_GetKeyDown() == KEYCODE_RUN_OR_STOP)
  35   2          {
  36   3            stopwatchTask_Mode = MODE_RUNNING;
  37   3          }
  38   2          else if(Input_GetKeyDown() == KEYCODE_INIT)
  39   2          {
  40   3            TIME_SET_HOUR(stopwatchTask_Time, 0);
  41   3            TIME_SET_MINUTE(stopwatchTask_Time, 0);
  42   3            TIME_SET_SECOND(stopwatchTask_Time, 0);
  43   3            TIME_SET_DECISECOND(stopwatchTask_Time, 0);
  44   3          }
  45   2        }
  46   1        else if(stopwatchTask_Mode == MODE_RUNNING && IN_FOREGROUND)
  47   1        {
  48   2          if(Input_GetKeyDown() == KEYCODE_RUN_OR_STOP)
  49   2          {
  50   3            stopwatchTask_Mode = MODE_STOP;
  51   3          }
  52   2        }
  53   1        
  54   1        if(IN_FOREGROUND)
  55   1        {
C51 COMPILER V9.59.0.0   STOPWATCHTASK                                                     01/10/2019 23:20:40 PAGE 2   

  56   2          SegScreen_Print_String(SEG_VIEW_ARRAY);
  57   2        }
  58   1        
  59   1      }
*** WARNING C280 IN LINE 26 OF StopwatchTask.c: 'looper': unreferenced local variable
  60          
  61          void StopwatchTask_OnDeciClockTrigger()
  62          {
  63   1        if(stopwatchTask_Mode == MODE_RUNNING)
  64   1        {
  65   2          Time_Add_1_Decisecond(&stopwatchTask_Time);
  66   2        }
  67   1      }
  68          void StopwatchTask_EnterTask()
  69          {
  70   1      }
  71          
  72          void StopwatchTask_ExitTask()
  73          {
  74   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    201    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
